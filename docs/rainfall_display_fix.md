# 降雨機率顯示優化

## 問題描述

CWA API 的 7 天天氣預報中，前 3 天有完整的降雨機率資料，但後 4 天的降雨機率欄位為空值（顯示為 "-"），導致畫面顯示 "-%"，看起來不專業。

## 資料分析

### API 回傳資料範例
```
12/06-12/08 (前3天):  有降雨機率 (0%, 10%, 20%)
12/09-12/12 (後4天):  降雨機率為 "-" (無資料)
```

## 解決方案

### 修改內容

#### 1. 前端邏輯優化 ([script.js](file:///c:/Users/Bruce/Desktop/天氣/web/script.js))

**位置**: Line 264-270

**功能**: 檢測降雨機率資料，當為 "-", "", 或 null 時顯示 "N/A"

```javascript
// 處理降雨機率顯示
let popDisplay = '';
if (item.pop === '-' || item.pop === '' || item.pop === null) {
    popDisplay = '<div class="forecast-pop forecast-pop-na"><i class="fa-solid fa-umbrella"></i> N/A</div>';
} else {
    popDisplay = `<div class="forecast-pop"><i class="fa-solid fa-umbrella"></i> ${item.pop}%</div>`;
}
```

#### 2. 樣式優化 ([style.css](file:///c:/Users/Bruce/Desktop/天氣/web/style.css))

**位置**: Line 416-419

**功能**: 為 N/A 狀態添加特殊樣式，使用較淡的顏色和透明度

```css
.forecast-pop-na {
    color: var(--text-secondary);
    opacity: 0.5;
}
```

## 效果對比

### 修正前
```
🌂 -%      ❌ 看起來像錯誤
```

### 修正後
```
🌂 N/A     ✅ 清楚表示資料不足
```

降雨機率為 N/A 時，圖標和文字會變得較淡（50% 透明度），讓使用者知道這是資料不足的狀態，而非系統錯誤。

## 測試步驟

1. 重新整理網頁 (F5)
2. 查詢任一縣市天氣
3. 查看後面幾天的降雨機率顯示
4. 應該看到 "N/A" 而非 "-%"
5. N/A 的文字應該比正常降雨機率更淡

## 額外說明

### 為什麼後面幾天沒有降雨機率？

根據 CWA API 的資料結構，`12小時降雨機率` 欄位在較遠的預報日期可能沒有提供數值，這是 API 本身的限制，不是我們程式的問題。

### 替代方案（未採用）

1. **完全隱藏降雨機率欄位** - 會讓卡片高度不一致
2. **顯示 "資料不足"** - 文字太長，不美觀
3. **顯示 "0%"** - 會誤導使用者

最終選擇 "N/A" 是因為：
- ✅ 簡潔明瞭
- ✅ 國際通用
- ✅ 不會誤導
- ✅ 維持視覺一致性

---

完成日期：2025-12-06
