# 待開發功能清單 (Future Features Roadmap)

以下是為「TW Weather」天氣 App 規劃的 20 個功能，旨在提升使用者體驗、增加實用性與互動性。

## 🌟 第一階段：實用性增強 (Utility)

### 1. ✅ 📍 自動定位功能 (Auto Geolocation) - 已完成
*   **描述**: 進入網站時，詢問使用者是否允許存取位置，自動切換到所在的縣市。
*   **價值**: 省去手動選擇縣市的步驟，體驗更流暢。
*   **難度**: ⭐⭐ (需使用 Browser Geolocation API)
*   **完成日期**: 2025-12-06
*   **實作內容**: 使用 Browser Geolocation API 取得使用者經緯度座標，計算與 22 個縣市政府座標的距離，自動切換到最近的縣市，整合「自動定位」按鈕，定位後自動查詢天氣並顯示雷達區塊

### 2. ✅ 📅 一週天氣預報 (7-Day Forecast) - 已完成
*   **描述**: 目前僅顯示未來 36 小時，擴充為顯示未來 7 天的天氣預測。
*   **價值**: 讓使用者能規劃週末或長期的行程。
*   **難度**: ⭐⭐⭐ (需串接不同的 CWA API，如 F-D0047-091)
*   **完成日期**: 2025-12-06
*   **實作內容**: 修正 API key 大小寫問題，完整實作 14 個時段（7 天早晚）的天氣預報顯示，加入星期幾標籤和時段標示

### 3. ✅ 😷 空氣品質監測 (AQI Integration) - 已完成
*   **描述**: 在天氣資訊旁顯示即時的空氣品質指標 (AQI) 與 PM2.5 數值，包含健康影響說明和行動建議。
*   **價值**: 對過敏族群或戶外運動者非常重要，一眼看懂空氣品質好壞。
*   **難度**: ⭐⭐⭐ (需串接環境部開放資料 API)
*   **完成日期**: 2025-12-11
*   **實作內容**: 整合環境部 AQI API，加入大型表情符號指示器 (😊😐😷😨😱☠️)，顯示健康影響描述（一般民眾+敏感族群），PM2.5 簡化顯示，三張智慧建議卡片（戶外活動、口罩配戴、門窗通風），優化語音播報包含完整健康建議

### 4. ✅ ☀️ 日出日落時間 (Sunrise & Sunset) - 已完成
*   **描述**: 顯示當天的日出與日落時間，並計算白天長度。
*   **價值**: 適合攝影師、晨跑者或觀賞夕陽的遊客。
*   **難度**: ⭐⭐ (可透過天文 API 或計算公式取得)
*   **完成日期**: 2025-12-06
*   **實作內容**: 使用 SunCalc.js 計算日出日落時間，顯示白天長度，加入精美的卡片式 UI

## 🚀 第二階段：互動與體驗 (Experience)

### 5. ✅ 👗 穿搭小幫手 2.0 (Smart Outfit Advisor) - 已完成
*   **描述**: 優化現有的生活建議，加入視覺化的穿搭推薦（例如顯示「短袖+薄外套」的插圖）。
*   **價值**: 增加趣味性與實用性，讓建議更直觀，使用者一眼就知道該穿什麼。
*   **難度**: ⭐⭐ (使用表情符號即可，不需額外圖片)
*   **完成日期**: 2025-12-11
*   **實作內容**: 根據溫度範圍自動推薦穿搭（≥30°C: 👕🧢☀️ 短袖+防曬，25-29°C: 👕 短袖，20-24°C: 👔🧥 長袖/薄外套，15-19°C: 👔🧥 長袖+外套，10-14°C: 🧥🧣 厚外套+圍巾，<10°C: 🧥🧣🎩 厚外套+圍巾+毛帽），降雨≥70% 自動加入雨具建議，溫差≥10°C 提示洋蔥式穿搭，設計專屬卡片顯示大型表情符號和文字說明

### 6. ✅ 🗺️ 雷達回波圖 (Radar Map Overlay) - 已完成
*   **描述**: 在網頁上嵌入即時的雷達回波圖或衛星雲圖，支援縮放查看。
*   **價值**: 讓專業使用者能自己判斷降雨趨勢，查看即時天氣狀況。
*   **難度**: ⭐⭐⭐⭐ (需處理地圖圖層與圖片疊加)
*   **完成日期**: 2025-12-11
*   **實作內容**: 整合 Leaflet.js 地圖庫，嵌入互動式台灣地圖（中心點 23.5°N, 121°E，縮放級別 7），疊加中央氣象署即時雷達回波圖（CV1_3600.png，透明度 70%），支援地圖縮放、拖曳功能，加入手動重新整理按鈕，每 10 分鐘自動更新雷達圖層，查詢天氣後自動顯示雷達區塊，手機版地圖高度優化為 400px，新增 5 級顏色圖例（綠→黃→橙→紅→紫），移除 OpenStreetMap 背景改用單色系，查詢城市後自動縮放到該城市區域
*   **⚠️ 備註**: 地圖定位功能已實現但座標精確度仍需改進，部分縣市定位可能不夠準確

## 💻 第三階段：技術與平台 (Tech & Platform)

### 7. ✅ 🌗 淺色/深色模式切換 (Light/Dark Mode Toggle) - 已完成
*   **描述**: 雖然目前是深色主題，但提供切換按鈕讓使用者選擇喜歡的風格。
*   **價值**: 滿足不同使用者的視覺偏好。
*   **難度**: ⭐⭐ (需重構 CSS 變數)
*   **完成日期**: 2025-12-06
*   **實作內容**: 使用 CSS 變數實現主題切換，localStorage 記憶使用者選擇，平滑過渡動畫

### 8. ✅ 🗣️ 語音播報天氣 (Voice Assistant) - 已完成
*   **描述**: 點擊按鈕後，用合成語音 (Text-to-Speech) 朗讀當前天氣與建議。
*   **價值**: 方便開車族或視力不便的使用者。
*   **難度**: ⭐⭐ (使用 Web Speech API)
*   **完成日期**: 2025-12-06
*   **實作內容**: 使用 Web Speech API 語音合成，播報天氣、日出日落、未來預報，加入脈動動畫視覺回饋

### 9. ✅ 🌐 多國語言支援 (Multi-language Support) - 已完成
*   **描述**: 提供語言切換功能（英文、日文、韓文等），讓介面與天氣資訊能以多種語言顯示。
*   **價值**: 服務來台旅遊的外國遊客，提升國際化程度，讓台灣天氣資訊更易於分享給國際友人。
*   **難度**: ⭐⭐⭐ (需建立多語言翻譯檔，處理繁體中文地名的英譯)
*   **完成日期**: 2025-12-15
*   **實作內容**: 建立完整的 i18n 翻譯系統 (`i18n.js`)，支援繁體中文 (zh-TW) 和英文 (en) 雙語切換，翻譯涵蓋所有介面元素 (325 行翻譯檔)，包含 22 個縣市英文地名對照、星期幾翻譯、AQI 等級描述、穿搭建議、天氣狀況等，語言選擇器整合於頁面右上角 (🇹🇼/🇬🇧 旗幟圖示)，使用 `data-i18n` 屬性實現動態翻譯，localStorage 記憶使用者語言偏好，支援參數插值功能 (例如 `{city}` 動態替換)，瀏覽器語言自動偵測

### 10. ✅ 🔍 地名關鍵字搜尋 (Smart Location Search) - 已完成
*   **描述**: 在搜尋框中輸入地名關鍵字（如「台北」、「高雄」、"Taipei"），系統自動模糊比對並快速切換到對應縣市。
*   **價值**: 比下拉選單更快速直覺，特別適合電腦版使用者，支援中英文搜尋提升便利性。
*   **難度**: ⭐⭐ (需實作搜尋過濾邏輯和自動完成功能)
*   **完成日期**: 2025-12-20
*   **實作內容**: 建立 `city-search.js` 模組包含 22 個縣市的中英文別名資料庫，實作 8 級模糊匹配演算法，取代下拉選單改用智慧搜尋輸入框，點擊搜尋框自動顯示所有城市，輸入時即時過濾並顯示自動完成建議，高亮匹配文字，支援鍵盤導航（↑↓+Enter+Esc），多語言支援

### 11. ✅ 🎤 語音搜尋地名 (Voice Search) - 已完成
*   **描述**: 新增麥克風按鈕，點擊後可以直接說出地名（如「台北」、「高雄」），系統自動辨識並查詢該地天氣。
*   **價值**: 免打字、快速查詢，適合開車、做家事或不方便打字的使用者，提供更直覺的語音互動體驗。
*   **難度**: ⭐⭐⭐ (需整合 Web Speech API 的語音辨識功能，處理地名辨識與模糊比對)
*   **完成日期**: 2025-12-20
*   **實作內容**: 整合 Web Speech API (SpeechRecognition)，支援繁體中文語音識別，搜尋框右側新增紫色麥克風按鈕，錄音中視覺回饋（脈衝動畫），語音結果自動填入並觸發搜尋，完整錯誤處理，瀏覽器相容性檢測

## 🐍 第四階段：Python 進階功能 (Python Backend Features)

### 12. ✅ 📊 天氣資料歷史記錄 (Weather Data Logger) - 已完成
*   **描述**: 使用 Python 自動記錄每次查詢的天氣資料到資料庫，建立歷史資料庫。
*   **價值**: 可以分析天氣變化趨勢，做數據統計與研究，展示 Python 檔案處理能力。
*   **難度**: ⭐⭐ (使用 `sqlite3` 模組)
*   **完成日期**: 2025-12-26
*   **實作內容**: 實作 `data_logger.py` 模組，使用 SQLite 儲存完整天氣資訊（包含溫度、濕度、AQI 等），設計標準化資料表結構，實作查詢記錄函式

### 13. ✅ 📈 天氣統計分析報告 (Weather Statistics) - 已完成
*   **描述**: 使用 Python 分析歷史天氣資料，產生統計報告（平均溫度、最高/最低溫、降雨天數等）。
*   **價值**: 展示 Python 資料分析能力，學習使用 pandas 或基礎統計運算。
*   **難度**: ⭐⭐⭐ (使用 pandas 或原生 Python 進行統計計算)
*   **完成日期**: 2025-12-31
*   **實作內容**: 實作 `data_analysis.py` 模組使用 pandas 分析歷史資料，包含平均溫度/AQI 計算、歷史最高/最低溫記錄、7 天溫度趨勢圖表（使用 Chart.js），支援城市篩選功能（下拉選單），前端實作統計資料卡片展示、趨勢圖表渲染，3 秒延遲自動載入優化效能
*   **技術重點**: `pandas` 資料處理, 統計函數 (`mean`, `max`, `min`), 資料視覺化基礎



### 16. ✅ 💾 SQLite 資料庫整合 (Database Integration) - 已完成
*   **描述**: 使用 SQLite 資料庫取代 CSV/JSON，儲存天氣歷史資料，支援資料查詢與管理。
*   **價值**: 學習資料庫操作，展示 Python 與 SQL 的整合能力。
*   **難度**: ⭐⭐ (使用 `sqlite3` 模組, 基礎 SQL 語法)
*   **完成日期**: 2025-12-26
*   **實作內容**: 建立 `weather_history.db`，設計 `weather_queries` 資料表與索引優化查詢效能，提供資料庫初始化與連線管理功能


    
### 19. ✅ 📊 天氣資料匯出功能 (Weather Data Export) - 已完成
*   **描述**: 使用 Python 提供資料匯出功能，讓使用者可以下載歷史天氣資料（CSV/Excel/JSON 格式）。
*   **價值**: 展示 Python 檔案處理與資料格式轉換能力，提升資料可攜性。
*   **難度**: ⭐⭐ (使用 `pandas`, `openpyxl` 等模組)
*   **完成日期**: 2025-12-26
*   **實作內容**: 實作 `data_exporter.py` 模組，使用 pandas 處理資料轉換，整合 Flask `send_file` 實作檔案下載 API，前端實作匯出 UI 與過濾條件，修正 Windows 環境 Unicode 錯誤問題

---

## 📊 專案總覽

**總功能數：15 項** 🎯
- ✅ **已完成：15 項** (100%) 🎉

### 按難度分類：
- ⭐⭐ 簡單：6 項
- ⭐⭐⭐ 中等：8 項
- ⭐⭐⭐⭐ 困難：1 項

### 按技術分類：
- 🌐 **前端功能**：10 項 (已全部完成)
- 🐍 **Python 後端功能**：5 項 (#12, #13, #16, #19)
- 🎨 **全端整合功能**：15 項 (已全部完成)